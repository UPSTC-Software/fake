webpackJsonp([1],{177:function(t,e){t.exports='\n:host {\n\tcolor: #1F1F1F ;\n\tdisplay: block ;\n\tfont-family: "Open Sans", "sans-serif" ;\n\tfont-size: 16px ;\n\tfont-weight: 300 ;\n\tmargin: 0px auto 0px auto ;\n\tpadding: 20px 0px 50px 0px ;\n\twidth: 1200px ;\n}\n\na {\n\tcolor: inherit ;\n\tcursor: pointer ;\n\ttext-decoration: underline ;\n\tuser-select: none ;\n\t\t-moz-user-select: none ;\n\t\t-webkit-user-select: none ;\n}\n\ninput {\n\tfont-size: 16px ;\n\tpadding: 5px 5px 5px 5px ;\n}\n\ninput.large {\n\twidth: 950px ;\n}\n\nbutton {\n\tfont-size: 16px ;\n\tpadding: 8px 15px 9px 15px ;\n}\n\nbn-date-time {\n\tfont-size: 16px ;\n}\n\nselect {\n\tfont-size: 16px ;\n}\n\ntextarea {\n\tdisplay: block ;\n\tfont-size: 16px ;\n\theight: 60px ;\n\tpadding: 5px 5px 5px 5px ;\n\twidth: 950px ;\n}\n\n.app-header {\n\tmargin-bottom: 40px ;\n\tposition: relative ;\n}\n\n.app-header__title {\n\tfont-size: 36px ;\n\tfont-weight: 600 ;\n\tline-height: 41px ;\n\tmargin: 0px 0px 20px 0px ;\n}\n\n.app-header__subtitle {\n\tdisplay: inline-block ;\n\tfont-size: 16px ;\n}\n\n.app-header__quote {\n\tcolor: #999999 ;\n\tfont-style: italic ;\n\tfont-weight: 300 ;\n}\n\n.app-header__author {\n\tcolor: #666666 ;\n\tdisplay: block ;\n\tfont-weight: 600 ;\n\tmargin-top: 7px ;\n\tpadding-right: 50px ;\n\ttext-align: right ;\n}\n\n.app-header__tools {\n\tposition: absolute ;\n\tright: 0px ;\n\ttop: 3px ;\n}\n\n.incident-io {}\n\n.incident-io__start {\n\tbackground-color: #FF2E63 ;\n\tborder-radius: 30px 30px 30px 30px ;\n\tcolor: #FFFFFF ;\n\tcursor: pointer ;\n\tdisplay: block ;\n\tfont-size: 12px ;\n\tfont-weight: 400 ;\n\theight: 37px ;\n\tline-height: 37px ;\n\tpadding: 0px 30px 0px 30px ;\n\ttext-decoration: none ;\n\ttext-transform: uppercase ;\n}\n\n.incident-io__start:hover {\n\tbackground-color: #F71953 ;\n}\n\n.incident-io__export {\n\tcolor: #999999 ;\n\tdisplay: block ;\n\tfont-size: 14px ;\n\tmargin-top: 12px ;\n\ttext-align: center ;\n}\n\n.section-header {\n\tborder-bottom: 2px solid #CCCCCC ;\n\tmargin: 40px 0px 40px 0px ;\n\tpadding-bottom: 10px ;\n\tposition: relative ;\n}\n\n.section-header__title {\n\tfont-size: 22px ;\n\tfont-weight: 600 ;\n\tline-height: 27px ;\n\tmargin: 0px 0px 0px 0px ;\n}\n\n.section-header__attributes {\n\tfont-size: 22px ;\n\tline-height: 27px ;\n\tposition: absolute ;\n\tright: 0px ;\n\ttop: 0px ;\n}\n\n.duration {}\n\n.duration__label {\n\tfont-weight: 400 ;\n}\n\n.duration__time {\n\tfont-weight: 300 ;\n}\n\n.form {}\n\n.form__field {\n\tmargin: 15px 0px 18px 0px ;\n}\n\n.form__field:after {\n\tclear: both ;\n\tcontent: "" ;\n\tdisplay: table ;\n\theight: 0px ;\n}\n\n.form__field--slack {\n\tmargin-top: 50px ;\n}\n\n.form__field-label {\n\tfloat: left ;\n\tfont-size: 18px ;\n\tfont-weight: 600 ;\n\tline-height: 24px ;\n\tpadding-top: 2px ;\n\ttext-align: right ;\n\twidth: 150px ;\n}\n\n.form__field-body {\n\tfloat: left ;\n\tmargin-left: 20px ;\n\twidth: 1000px ;\n}\n\n.form__field-body--select {\n\tpadding-top: 4px ;\n}\n\n.form__actions {\n\tpadding-left: 170px ;\n}\n\n.form__primary-action {\n\tdisplay: inline-block ;\n\tmargin-right: 20px ;\n}\n\n.form__secondary-action {\n\tcolor: #999999 ;\n\tcursor: pointer ;\n\ttext-decoration: underline ;\n\ttext-transform: lowercase ;\n}\n\nspan.local-time-note {\n\tcolor: #CC0000 ;\n\tdisplay: inline-block ;\n\tfont-style: italic ;\n\tmargin-left: 10px ;\n\ttext-transform: lowercase ;\n}\n\n.slack {}\n\n.slack__size {}\n\n.slack__format {}\n\n.slack__content {\n\tdisplay: block ;\n\theight: 200px ;\n\tmargin-top: 12px ;\n}\n\n.add-update {}\n\n.add-update__status {}\n\n.add-update__content {\n\tdisplay: block ;\n\tmargin: 12px 0px 12px 0px ;\n}\n\n.add-update__submit {}\n\n.add-update__submit-note {\n\tcolor: #CCCCCC ;\n\tdisplay: inline-block ;\n\tfont-style: italic ;\n\tmargin-left: 15px ;\n}\n\n.timeline {\n\tfont-size: 14px ;\n\tline-height: 25px ;\n}\n\n.timeline__item {\n\tborder-bottom: 1px solid #EEEEEE ;\n\tmargin-bottom: 15px ;\n\tpadding-bottom: 15px ;\n}\n\n.timeline__item:last-child {\n\tborder-bottom-width: 0px ;\n\tpadding-bottom: 15px ;\n}\n\n.timeline__item:after {\n\tclear: both ;\n\tcontent: "" ;\n\tdisplay: table ;\n\theight: 0px ;\n}\n\n.timeline__createdAt {\n\tfloat: left ;\n\ttext-align: right ;\n\twidth: 150px ;\n}\n\n.timeline__time {\n\tfont-weight: 600 ;\n}\n\n.timeline__date {\n\tfont-weight: 400 ;\n}\n\n.timeline__description {\n\tfloat: left ;\n\tfont-weight: 300 ;\n\tmargin-left: 20px ;\n\twidth: 900px ;\n}\n\n.timeline__status {\n\tfont-weight: 400 ;\n}\n\n.timeline__actions {\n\tcolor: #CCCCCC ;\n\tfloat: right ;\n\ttext-align: right ;\n\twidth: 100px ;\n}\n\n.timeline__edit,\n.timeline__delete {\n\tcolor: #333333 ;\n\tcursor: pointer ;\n\ttext-decoration: underline ;\n}\n\n.timeline__separator {\n\tdisplay: inline-block ;\n\tmargin: 0px 5px 0px 5px ;\n}\n\n.io-modal {\n\tbackground-color: rgba( 255, 255, 255, 0.95 ) ;\n\tbottom: 0px ;\n\tleft: 0px ;\n\tposition: fixed ;\n\tright: 0px ;\n\ttop: 0px ;\n\tz-index: 1000 ;\n}\n\n.io-modal__content {\n\tleft: 50% ;\n\tmargin-left: -450px ;\n\tposition: absolute ;\n\ttop: 50px ;\n\twidth: 900px ;\n}\n\n.io-modal__header {\n\tmargin-bottom: 20px ;\n\tposition: relative ;\n}\n\n.io-modal__title {\n\tfont-size: 22px ;\n\tfont-weight: 600 ;\n\tline-height: 27px ;\n\tmargin: 0px 0px 0px 0px ;\n}\n\n.io-modal__close {\n\tfont-size: 16px ;\n\tfont-weight: 400 ;\n\tline-height: 27px ;\n\tposition: absolute ;\n\ttop: 0px ;\n\tright: 0px ;\n}\n\n.io-modal__payload {\n\tbox-sizing: border-box ;\n\tborder: 4px solid #CCCCCC ;\n\tdisplay: block ;\n\theight: 300px ;\n\tpadding: 10px 10px 10px 10px ;\n\twidth: 100% ;\n}\n\n.io-modal__actions {\n\tmargin-top: 25px ;\n}\n\n.io-modal__import {\n\tbackground-color: #2386DB ;\n\tborder-radius: 5px 5px 5px 5px ;\n\tcolor: #FFFFFF ;\n\tdisplay: block ;\n\tfont-size: 18px ;\n\tfont-weight: 400 ;\n\tline-height: 60px ;\n\ttext-decoration: none ;\n\ttext-transform: uppercase ;\n\ttext-align: center ;\n}\n\n.io-modal__import:hover {\n\tbackground-color: #196BB2 ;\n}\n'},178:function(t,e){t.exports='\n<header class="app-header">\n\n\t<h1 class="app-header__title">\n\t\tIncident Commander\n\t</h1>\n\n\t<div class="app-header__subtitle">\n\n\t\t<span class="app-header__quote">\n\t\t\t"{{ quote.excerpt }}"\n\t\t</span>\n\n\t\t<span class="app-header__author">\n\t\t\t&mdash; {{ quote.author }}\n\t\t</span>\n\n\t</div>\n\n\t<div class="app-header__tools incident-io">\n\t\t<a (click)="startNewIncident()" class="incident-io__start">Start New Incident</a>\n\t\t<a (click)="exportIncident()" class="incident-io__export">Import / Export</a>\n\t</div>\n\n</header>\n\n<section class="control-panel">\n\n\t<header class="section-header">\n\n\t\t<h2 class="section-header__title">\n\t\t\tCommand Center\n\t\t</h2>\n\n\t\t<div class="section-header__attributes duration">\n\t\t\t<span class="duration__label">\n\t\t\t\tDuration:\n\t\t\t</span>\n\t\t\t<span class="duration__time">\n\t\t\t\t{{ this.duration.hours }} Hours, {{ this.duration.minutes }} Minutes\n\t\t\t</span>\n\t\t</div>\n\n\t</header>\n\n\t<form class="form">\n\n\t\t<div class="form__field">\n\t\t\t<div class="form__field-label">\n\t\t\t\tDescription:\n\t\t\t</div>\n\t\t\t<div class="form__field-body">\n\n\t\t\t\t<input type="text" name="description" [(ngModel)]="form.description" (ngModelChange)="applyForm()" autofocus class="large" />\n\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="form__field">\n\t\t\t<div class="form__field-label">\n\t\t\t\tPriority:\n\t\t\t</div>\n\t\t\t<div class="form__field-body form__field-body--select">\n\n\t\t\t\t<select name="priority" [(ngModel)]="form.priorityID" (ngModelChange)="applyForm()">\n\t\t\t\t\t<option *ngFor="let option of priorities" [ngValue]="option.id">\n\t\t\t\t\t\t{{ option.id }} &mdash; {{ option.description }}\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="form__field">\n\t\t\t<div class="form__field-label">\n\t\t\t\tStarted At:\n\t\t\t</div>\n\t\t\t<div class="form__field-body form__field-body--select">\n\n\t\t\t\t<bn-date-time [(value)]="form.startedAt" (valueChange)="applyForm()"></bn-date-time>\n\n\t\t\t\t<span class="local-time-note">\n\t\t\t\t\t( Use your local time )\n\t\t\t\t</span>\n\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="form__field">\n\t\t\t<div class="form__field-label">\n\t\t\t\tVideo Link:\n\t\t\t</div>\n\t\t\t<div class="form__field-body">\n\n\t\t\t\t<input type="text" name="videoLink" [(ngModel)]="form.videoLink" (ngModelChange)="applyForm()" class="large" />\n\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="form__field">\n\t\t\t<div class="form__field-label">\n\t\t\t\tUpdate:\n\t\t\t</div>\n\t\t\t<div class="form__field-body form__field-body--select add-update">\n\n\t\t\t\t<select name="updateStatus" [(ngModel)]="form.updateStatusID" class="add-update__status">\n\t\t\t\t\t<option *ngFor="let option of statuses" [ngValue]="option.id">\n\t\t\t\t\t\t{{ option.id }}\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\n\t\t\t\t<textarea\n\t\t\t\t\tname="updateDescription"\n\t\t\t\t\t[(ngModel)]="form.updateDescription"\n\t\t\t\t\t(keydown.meta.Enter)="addUpdate()"\n\t\t\t\t\tclass="add-update__content">\n\t\t\t\t</textarea>\n\n\t\t\t\t<button type="button" (click)="addUpdate()" class="add-update__submit">\n\t\t\t\t\tAdd Update\n\t\t\t\t</button>\n\n\t\t\t\t<span class="add-update__submit-note">Or CMD+Enter</span>\n\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="form__field form__field--slack">\n\t\t\t<div class="form__field-label">\n\t\t\t\tFor Slack:\n\t\t\t</div>\n\t\t\t<div class="form__field-body form__field-body--select slack">\n\n\t\t\t\t<select name="slackSize" [(ngModel)]="form.slackSize" (ngModelChange)="applyForm()" class="slack__size">\n\t\t\t\t\t<option [ngValue]="9999">Show All Updates</option>\n\t\t\t\t\t<option [ngValue]="1">1 Update</option>\n\t\t\t\t\t<option [ngValue]="3">3 Updates</option>\n\t\t\t\t\t<option [ngValue]="5">5 Updates</option>\n\t\t\t\t\t<option [ngValue]="8">8 Updates</option>\n\t\t\t\t\t<option [ngValue]="13">13 Updates</option>\n\t\t\t\t</select>\n\n\t\t\t\t<select name="slackFormat" [(ngModel)]="form.slackFormat" (ngModelChange)="applyForm()" class="slack__format">\n\t\t\t\t\t<option [ngValue]=" \'compact\' ">Compact</option>\n\t\t\t\t\t<option [ngValue]=" \'readable\' ">Readable</option>\n\t\t\t\t</select>\n\n\t\t\t\t<textarea #slackRef [readonly]="true" [value]="form.slack" (click)="slackRef.select()" class="slack__content"></textarea>\n\n\t\t\t</div>\n\t\t</div>\n\n\t</form>\n\n</section>\n\n<section *ngIf="incident.updates.length" class="previous-updates">\n\n\t<header class="section-header">\n\n\t\t<h2 class="section-header__title">\n\t\t\tPrevious Updates\n\t\t</h2>\n\n\t</header>\n\n\t\x3c!-- BEGIN: Edit Form. --\x3e\n\t<ng-template [ngIf]="editForm.update">\n\n\t\t<form class="form">\n\n\t\t\t<div class="form__field">\n\t\t\t\t<div class="form__field-label">\n\t\t\t\t\tStatus:\n\t\t\t\t</div>\n\t\t\t\t<div class="form__field-body form__field-body--select">\n\n\t\t\t\t\t<select name="updateStatus" [(ngModel)]="editForm.statusID" class="update__status">\n\t\t\t\t\t\t<option *ngFor="let option of statuses" [ngValue]="option.id">\n\t\t\t\t\t\t\t{{ option.id }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="form__field">\n\t\t\t\t<div class="form__field-label">\n\t\t\t\t\tCreated At:\n\t\t\t\t</div>\n\t\t\t\t<div class="form__field-body form__field-body--select">\n\n\t\t\t\t\t<bn-date-time [(value)]="editForm.createdAt" (valueChange)="applyForm()"></bn-date-time>\n\n\t\t\t\t\t<span class="local-time-note">\n\t\t\t\t\t\t( Use your local time )\n\t\t\t\t\t</span>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="form__field">\n\t\t\t\t<div class="form__field-label">\n\t\t\t\t\tDescription:\n\t\t\t\t</div>\n\t\t\t\t<div class="form__field-body">\n\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tname="updateDescription"\n\t\t\t\t\t\t[(ngModel)]="editForm.description"\n\t\t\t\t\t\t(keydown.meta.Enter)="saveUpdateChanges()"\n\t\t\t\t\t\tclass="">\n\t\t\t\t\t</textarea>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="form__actions">\n\n\t\t\t\t<button type="button" (click)="saveUpdateChanges()" class="form__primary-action">\n\t\t\t\t\tSave Changes\n\t\t\t\t</button>\n\n\t\t\t\t<a (click)="cancelEdit()" class="form__secondary-action">Cancel</a>\n\n\t\t\t</div>\n\n\t\t</form>\n\n\t</ng-template>\n\t\x3c!-- END: Edit Form. --\x3e\n\n\n\t\x3c!-- BEGIN: Timeline. --\x3e\n\t<ng-template [ngIf]="! editForm.update">\n\n\t\t<div class="timeline">\n\n\t\t\t<div *ngFor="let update of incident.updates" class="timeline__item">\n\n\t\t\t\t<div class="timeline__createdAt">\n\t\t\t\t\t<div class="timeline__time">\n\t\t\t\t\t\t{{ update.createdAt | timelineTime }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="timeline__date">\n\t\t\t\t\t\t{{ update.createdAt | timelineDate }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="timeline__description">\n\t\t\t\t\t<span class="timeline__status">{{ update.status.id }}</span>\n\t\t\t\t\t&mdash;\n\t\t\t\t\t{{ update.description }}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="timeline__actions">\n\t\t\t\t\t<a (click)="editUpdate( update )" class="timeline__edit">edit</a>\n\t\t\t\t\t<span class="timeline__separator">|</span>\n\t\t\t\t\t<a (click)="deleteUpdate( update )" class="timeline__delete">delete</a>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\t</ng-template>\n\t\x3c!-- END: Timeline. --\x3e\n\n</section>\n\n<section *ngIf="isShowingIoModal" class="io-modal">\n\t<div class="io-modal__content">\n\n\t\t<header class="io-modal__header">\n\n\t\t\t<h2 class="io-modal__title">\n\t\t\t\tIncident Import &amp; Export \n\t\t\t</h2>\n\n\t\t\t<a (click)="closeExportIncident()" class="io-modal__close">Close</a>\n\n\t\t</header>\n\n\t\t<textarea #ioRef name="payload" [(ngModel)]="ioForm.payload" (focus)="ioRef.select()" class="io-modal__payload"></textarea>\n\n\t\t<div class="io-modal__actions">\n\t\t\t<a (click)="importIncident()" class="io-modal__import">Import Incident</a>\n\t\t</div>\n\n\t</div>\n</section>\n'},179:function(t,e){t.exports="\n:host {\n\tdisplay: inline-block ;\n\tfont-size: inherit ;\n}\n\nselect {\n\tfont-size: inherit ;\n}\n\ndiv.date {\n\tdisplay: inline-block ;\n}\n\ndiv.seperator {\n\tdisplay: inline-block ;\n\tmargin-left: 10px ;\n\tmargin-right: 10px ;\n}\n\ndiv.time {\n\tdisplay: inline-block ;\n}\n\n"},180:function(t,e){t.exports='\n<div class="date">\n\n\t<select name="month" [(ngModel)]="form.month" (ngModelChange)="applyFormUpdates()">\n\t\t<option [ngValue]="null">- -</option>\n\t\t<option *ngFor="let m of monthOptions" [ngValue]="m">\n\t\t\t{{ m.description }}\n\t\t</option>\n\t</select>\n\n\t<select name="day" [(ngModel)]="form.day" (ngModelChange)="applyFormUpdates()">\n\t\t<option [ngValue]="null">- -</option>\n\t\t<option *ngFor="let option of dayOptions | slice:0:getDaysInMonth()" [ngValue]="option">\n\t\t\t{{ option.description }}\n\t\t</option>\n\t</select>\n\n\t<select name="year" [(ngModel)]="form.year" (ngModelChange)="applyFormUpdates()">\n\t\t<option [ngValue]="null">- -</option>\n\t\t<option *ngFor="let option of yearOptions" [ngValue]="option">\n\t\t\t{{ option.description }}\n\t\t</option>\n\t</select>\n\n</div>\n\n<div class="seperator">\n\t@\n</div>\n\n<div class="time">\n\n\t<select name="hour" [(ngModel)]="form.hour" (ngModelChange)="applyFormUpdates()">\n\t\t<option [ngValue]="null">- -</option>\n\t\t<option *ngFor="let option of hourOptions" [ngValue]="option">\n\t\t\t{{ option.description }}\n\t\t</option>\n\t</select>\n\n\t<select name="minute" [(ngModel)]="form.minute" (ngModelChange)="applyFormUpdates()">\n\t\t<option [ngValue]="null">- -</option>\n\t\t<option *ngFor="let option of minuteOptions" [ngValue]="option">\n\t\t\t{{ option.description }}\n\t\t</option>\n\t</select>\n\n</div>\n'},203:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),r=n(21),s=n(38),d=n(71),l=n(72),p=n(73),c=function(){function t(t,e,n){this.incidentService=t,this.quoteService=e,this.slackSerializer=n,this.priorities=this.incidentService.getPriorities(),this.statuses=this.incidentService.getStatuses(),this.incident=this.loadOrCreateIncident(),this.form={description:this.incident.description,priorityID:this.incident.priority.id,startedAt:this.incident.startedAt,videoLink:this.incident.videoLink,updateStatusID:this.incident.status.id,updateDescription:"",slackSize:5,slackFormat:"compact",slack:this.slackSerializer.serialize(this.incident,5,"compact")},this.editForm={update:null,statusID:null,createdAt:null,description:null},this.ioForm={payload:null},this.isShowingIoModal=!1,this.duration={hours:0,minutes:0},this.setupDurationInterval(),this.quote=this.quoteService.getRandomQuote()}return t.prototype.addUpdate=function(){if(this.form.updateDescription){var t={id:Date.now(),status:r(this.statuses,["id",this.form.updateStatusID]),createdAt:new Date,description:this.form.updateDescription};this.incident.status=t.status,this.incident.updates.push(t),this.incident.updates.sort(this.sortCreatedAtDesc),this.incidentService.saveIncident(this.incident),this.form.updateDescription="",this.form.slack=this.slackSerializer.serialize(this.incident,this.form.slackSize,this.form.slackFormat)}},t.prototype.applyForm=function(){this.incident.description=this.form.description,this.incident.priority=r(this.priorities,["id",this.form.priorityID]),this.incident.startedAt=this.form.startedAt,this.incident.videoLink=this.form.videoLink,this.incidentService.saveIncident(this.incident),this.updateDuration(),this.form.slack=this.slackSerializer.serialize(this.incident,this.form.slackSize,this.form.slackFormat)},t.prototype.cancelEdit=function(){this.editForm.update=null},t.prototype.closeExportIncident=function(){this.isShowingIoModal=!1},t.prototype.deleteUpdate=function(t){confirm("Delete: "+t.description+"?")&&(this.incident.updates=s(this.incident.updates,t),this.incidentService.saveIncident(this.incident),this.form.slack=this.slackSerializer.serialize(this.incident,this.form.slackSize,this.form.slackFormat))},t.prototype.editUpdate=function(t){this.editForm.update=t,this.editForm.statusID=t.status.id,this.editForm.createdAt=t.createdAt,this.editForm.description=t.description},t.prototype.exportIncident=function(){this.ioForm.payload=this.incidentService.prepareForExport(this.incident),this.isShowingIoModal=!0},t.prototype.importIncident=function(){try{this.incident=this.incidentService.prepareForImport(this.ioForm.payload),this.incidentService.saveIncident(this.incident)}catch(t){return void alert("Import payload could not be parsed as JSON.")}this.form.description=this.incident.description,this.form.priorityID=this.incident.priority.id,this.form.startedAt=this.incident.startedAt,this.form.videoLink=this.incident.videoLink,this.form.slack=this.slackSerializer.serialize(this.incident,this.form.slackSize,this.form.slackFormat),this.updateDuration(),this.isShowingIoModal=!1},t.prototype.logit=function(){console.log("here")},t.prototype.saveUpdateChanges=function(){var t=this.editForm.update;t.status=r(this.statuses,["id",this.editForm.statusID]),t.createdAt=this.editForm.createdAt,t.description=this.editForm.description,this.incident.updates.sort(this.sortCreatedAtDesc),this.incidentService.saveIncident(this.incident),this.editForm.update=null,this.form.slack=this.slackSerializer.serialize(this.incident,this.form.slackSize,this.form.slackFormat)},t.prototype.startNewIncident=function(){confirm("Start a new incident (and clear the current incident data)?")&&(this.incident=this.incidentService.getNewIncident(),this.incidentService.saveIncident(this.incident),this.updateDuration(),this.form.description=this.incident.description,this.form.priorityID=this.incident.priority.id,this.form.startedAt=this.incident.startedAt,this.form.videoLink=this.incident.videoLink,this.form.updateStatusID=this.statuses[0].id,this.form.updateDescription="",this.form.slack=this.slackSerializer.serialize(this.incident,this.form.slackSize,this.form.slackFormat),this.quote=this.quoteService.getRandomQuote())},t.prototype.loadOrCreateIncident=function(){return this.incidentService.getRecentIncident()||this.incidentService.getNewIncident()},t.prototype.setupDurationInterval=function(){var t=this;setInterval(function(){t.updateDuration()},3e4),this.updateDuration()},t.prototype.sortCreatedAtDesc=function(t,e){return t.createdAt<=e.createdAt?-1:1},t.prototype.updateDuration=function(){var t=new Date;if(this.incident.startedAt<=t){var e=(t.getTime()-this.incident.startedAt.getTime())/1e3,n=Math.floor(e/60),i=Math.floor(e/60/60);this.duration.hours=i,this.duration.minutes=n-60*i}else this.duration.hours=0,this.duration.minutes=0},t}();c=i([a.Component({selector:"my-app",styles:[n(177)],template:n(178)}),o("design:paramtypes",[d.IncidentService,l.QuoteService,p.SlackSerializer])],c),e.AppComponent=c},204:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),r=n(0),s=n(0),d=n(21),l=n(37),p=function(){function t(){var t=new Date;this.value=null,this.valueChange=new s.EventEmitter,this.form={year:null,month:null,day:null,hour:null,minute:null},this.yearOptions=this.fromRange(t.getFullYear()-1,t.getFullYear()+1),this.monthOptions=this.getMonthOptions(),this.dayOptions=this.fromRange(1,31),this.hourOptions=this.getHourOptions(),this.minuteOptions=this.fromRange(0,59)}return t.prototype.applyFormUpdates=function(){if(this.form.year&&this.form.month&&this.form.day&&this.form.hour&&this.form.minute){var t=new Date(this.form.year.id,this.form.month.id,this.form.day.id,this.form.hour.id,this.form.minute.id,0);t.getMonth()!==this.form.month.id&&t.setDate(0),this.value=null,this.form.year=null,this.form.month=null,this.form.day=null,this.form.hour=null,this.form.minute=null,this.valueChange.emit(t)}else this.value instanceof Date&&this.valueChange.emit(null)},t.prototype.getDaysInMonth=function(){return this.form.year&&this.form.month?new Date(this.form.year.id,this.form.month.id+1,0).getDate():this.dayOptions.length},t.prototype.ngOnChanges=function(t){!this.value||this.value instanceof Date||(this.value=null),this.value?(this.yearOptions=this.fromRange(this.value.getFullYear()-1,this.value.getFullYear()+1),this.form.year=d(this.yearOptions,["id",this.value.getFullYear()]),this.form.month=d(this.monthOptions,["id",this.value.getMonth()]),this.form.day=d(this.dayOptions,["id",this.value.getDate()]),this.form.hour=d(this.hourOptions,["id",this.value.getHours()]),this.form.minute=d(this.minuteOptions,["id",this.value.getMinutes()])):(this.form.year=null,this.form.month=null,this.form.day=null,this.form.hour=null,this.form.minute=null)},t.prototype.fromRange=function(t,e){return l(t,e+1).map(function(t){return{id:t,description:("0"+t.toString()).slice(-2)}})},t.prototype.getHourOptions=function(){return l(0,24).map(function(t){var e=(t%12||12).toString();return e+=t<12?" AM":" PM",{id:t,description:e}})},t.prototype.getMonthOptions=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"].map(function(t,e){return{id:e,description:t}})},t}();p=i([r.Component({selector:"bn-date-time",inputs:["value"],outputs:["valueChange"],changeDetection:a.ChangeDetectionStrategy.OnPush,styles:[n(179)],template:n(180)}),o("design:paramtypes",[])],p),e.DateTimeComponent=p},206:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(22),o=n(77);i.platformBrowserDynamic().bootstrapModule(o.AppModule)},208:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),a=function(){function t(){}return t.prototype.transform=function(t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getDate()},t}();a=i([o.Pipe({name:"timelineDate",pure:!0})],a),e.TimelineDatePipe=a},209:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),a=function(){function t(){}return t.prototype.transform=function(t){var e=t.getHours(),n=t.getMinutes(),i=t.toTimeString().match(/\((\w+)\)/)[1],o=e<12?"AM":"PM";return(e%12||12)+":"+("0"+n).slice(-2)+" "+o+" "+i},t}();a=i([o.Pipe({name:"timelineTime",pure:!0})],a),e.TimelineTimePipe=a},71:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.localStorageKey="incident-commander"}return t.prototype.getNewIncident=function(){var t=this.getPriorities(),e=this.getStatuses(),n=this.getNewName();return{name:n,description:"",priority:t[0],status:e[0],startedAt:new Date,videoLink:"https://hangouts.google.com/hangouts/_/invisionapp.com/"+n,updates:[]}},t.prototype.getPriorities=function(){return[{id:"P1",description:"All customers are affected by outage, vulnerability, or performance degradation."},{id:"P2",description:"Large segment of customers are affected by outage, vulnerability, or performance degradation."},{id:"P3",description:"Small segment of customers are affected by outage, vulnerability, or performance degradation."},{id:"P4",description:"Site performance degraded for some customers."},{id:"P5",description:"Potential issue, but customers are currently unaware."}]},t.prototype.getRecentIncident=function(){var t=localStorage.getItem(this.localStorageKey);return t?JSON.parse(t,this.jsonReviver):null},t.prototype.getStatuses=function(){return[{id:"Investigating",description:"We're still trying to figure out exactly what is wrong and haven't identified the cause of the issue yet."},{id:"Identified",description:"We've identified the cause of the issue and are working on a fix."},{id:"Monitoring",description:"We've released a fix for the issue but we're still monitoring to make sure the problem is indeed resolved."},{id:"Resolved",description:"We believe the issue is resolved and service is restored to normal levels again."}]},t.prototype.prepareForExport=function(t){return JSON.stringify(t,null,"\t")},t.prototype.prepareForImport=function(t){return JSON.parse(t,this.jsonReviver)},t.prototype.saveIncident=function(t){localStorage.setItem(this.localStorageKey,JSON.stringify(t))},t.prototype.getNewName=function(){return"Incident-"+Date.now()},t.prototype.jsonReviver=function(t,e){var n=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;return"string"==typeof e&&n.test(e)?new Date(e):e},t}();e.IncidentService=i},72:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),o=function(){function t(){this.quotes=[{author:"Sun Tzu",excerpt:"Appear weak when you are strong, and strong when you are weak."},{author:"Sun Tzu",excerpt:"In the midst of chaos, there is also opportunity."},{author:"Sun Tzu",excerpt:"Move swift as the Wind and closely-formed as the Wood. Attack like the Fire and be still as the Mountain."},{author:"Sun Tzu",excerpt:"Treat your men as you would your own beloved sons. And they will follow you into the deepest valley."},{author:"Sun Tzu",excerpt:"So in war, the way is to avoid what is strong, and strike at what is weak."},{author:"Sun Tzu",excerpt:"One may know how to conquer without being able to do it."},{author:"Sun Tzu",excerpt:"If ignorant both of your enemy and yourself, you are certain to be in peril."},{author:"Sun Tzu",excerpt:"If he sends reinforcements everywhere, he will everywhere be weak."},{author:"Sun Tzu",excerpt:"Disorder came from order, fear came from courage, weakness came from strength."},{author:"Sun Tzu",excerpt:"Therefore, just as water retains no constant shape, so in warfare there are no constant conditions."},{author:"Sun Tzu",excerpt:"Plan for what it is difficult while it is easy, do what is great while it is small."},{author:"Sun Tzu",excerpt:"So long as victory can be attained, stupid haste is preferable to clever dilatoriness."},{author:"Sun Tzu",excerpt:"The principle on which to manage an army is to set up one standard of courage which all must reach."},{author:"Sun Tzu",excerpt:"It is best to keep one's own state intact; to crush the enemy's state is only second best."},{author:"Sun Tzu",excerpt:"Ground on which we can only be saved from destruction by fighting without delay, is desperate ground."}]}return t.prototype.getRandomQuote=function(){var t=i(0,this.quotes.length-1);return this.quotes[t]},t}();e.QuoteService=o},73:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.serialize=function(t,e,n){void 0===n&&(n="compact");var i=["*Incident Description*: "+t.description,"*Priority*: "+t.priority.id,"*Start of Customer Impact*: "+this.formatTimeInEST(t.startedAt),"*Zoom or Hangout link*: `"+t.videoLink+"` ","*Status*: "+t.status.id,"*Timeline*:",""],o=t.updates.slice(-e);if(o.length!==t.updates.length){var a=t.updates.length-o.length;i.push("> _.... *"+a+" update(s)* not being shown._"),i.push("> ")}for(var r=0;r<o.length;r++){"readable"===n&&0!==r&&i.push("> ");var s=o[r];i.push("> *"+this.formatTimeInEST(s.createdAt)+" [ "+s.status.id+" ]*: — "+s.description)}return i.join("\n")},t.prototype.formatTimeInEST=function(t){var e=new Date(t),n=300;switch(t.getFullYear()){case 2017:var i=new Date(2017,2,12,2,0,0),o=new Date(2017,10,4,2,0,0);i<=t&&t<=o&&(n=240);break;case 2018:var i=new Date(2018,2,11,2,0,0),o=new Date(2018,10,4,2,0,0);i<=t&&t<=o&&(n=240);break;case 2019:var i=new Date(2019,2,10,2,0,0),o=new Date(2019,10,3,2,0,0);i<=t&&t<=o&&(n=240);break;case 2020:var i=new Date(2020,2,8,2,0,0),o=new Date(2020,10,1,2,0,0);i<=t&&t<=o&&(n=240)}var a=t.getTimezoneOffset(),r=n-a;e.setMinutes(e.getMinutes()-r);var s=e.getHours(),d=e.getMinutes(),l=s<12?"AM":"PM";return(s%12||12)+":"+("0"+d).slice(-2)+" "+l+" EST"},t}();e.SlackSerializer=i},77:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,n,r):o(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(e,"__esModule",{value:!0});var o=n(23),a=n(35),r=n(0),s=n(203),d=n(204),l=n(71),p=n(72),c=n(73),u=n(208),h=n(209),m=function(){function t(){}return t}();m=i([r.NgModule({bootstrap:[s.AppComponent],imports:[o.BrowserModule,a.FormsModule],declarations:[s.AppComponent,d.DateTimeComponent,u.TimelineDatePipe,h.TimelineTimePipe],providers:[l.IncidentService,p.QuoteService,c.SlackSerializer]})],m),e.AppModule=m}},[206]);